import{r,j as e}from"./index-CthhI9Wb.js";import{H as b,F as N}from"./Footer-BZdv_qgX.js";const S=()=>{const[c,x]=r.useState(""),[o,p]=r.useState(""),[t,d]=r.useState(null),[m,n]=r.useState(""),[u,h]=r.useState(!1),i=a=>{const s=new Date(a),l=s.getFullYear(),v=String(s.getMonth()+1).padStart(2,"0"),g=String(s.getDate()).padStart(2,"0");return`${l}/${v}/${g}`},j=async a=>{a.preventDefault(),n(""),d(null),h(!0);try{const s=await fetch(`/medical/search?idNumber=${encodeURIComponent(c)}&servicecode=${encodeURIComponent(o)}`),l=await s.json();s.ok?d(l):n(l.error||"حدث خطأ غير معروف")}catch{n("فشل الاتصال بالخادم")}finally{h(!1)}};return e.jsx("div",{className:"App",children:e.jsx("main",{children:e.jsxs("div",{className:"",children:[e.jsx(b,{}),e.jsxs("div",{className:"inner-page inquiries-container",children:[e.jsx("h1",{className:"heading",children:"الإجازات المرضية"}),e.jsx("p",{className:"sub-heading",children:"خدمة الاستعلام عن الإجازات المرضية تتيح لك الاستعلام عن حالة طلبك للإجازة ويمكنك طباعتها عن طريق تطبيق صحتي"}),m&&e.jsx("div",{className:"alert alert-danger",children:m}),e.jsx("form",{onSubmit:j,children:e.jsxs("div",{className:"row justify-content-center mt-1",children:[e.jsxs("div",{className:"col-md-5 p-4",children:[e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",maxLength:"20",placeholder:"رمز الخدمة",className:"form-control",value:o,onChange:a=>p(a.target.value),required:!0})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{}),e.jsx("input",{type:"text",maxLength:"10",pattern:"\\d*",placeholder:"رقم الهوية / الإقامة",className:"form-control",value:c,onChange:a=>x(a.target.value),required:!0})]}),t&&e.jsx("div",{className:"card",style:{margin:"1rem 0"},children:e.jsx("div",{className:"card-header info-grid",children:[{label:"الاسم",value:t.name},{label:"تاريخ إصدار تقرير الإجازة",value:i(t.issueDate)},{label:"تبدأ من",value:i(t.startDate)},{label:"وحتى",value:i(t.endDate)},{label:"المدة بالأيام",value:t.duration},{label:"اسم الطبيب",value:t.doctor},{label:"المسمى الوظيفي",value:t.jobTitle}].map((a,s)=>e.jsxs("div",{style:{margin:"5px"},children:[e.jsxs("p",{style:{margin:"0.1rem 0",fontWeight:"bold"},children:[a.label,":"]}),e.jsx("p",{style:{margin:"0.1rem 0"},children:a.value})]},s))})}),e.jsx("button",{type:"submit",className:"btn btn-primary mt-3",disabled:u,children:u?"جاري استعلام...":"استعلام"})]}),e.jsx("div",{className:"col-md-12 text-center",children:e.jsx("a",{className:"btn btn-primary mb-3",href:"#/inquiries",children:"رجوع للاستعلامات"})})]})})]}),e.jsx(N,{})]})})})};export{S as default};
