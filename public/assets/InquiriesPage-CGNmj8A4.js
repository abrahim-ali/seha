import{r as t,j as e}from"./index-D3Uf87pi.js";import{H as u,F as g}from"./Footer-bbaPJg-j.js";const f=()=>{const[i,j]=t.useState(""),[c,m]=t.useState(""),[s,l]=t.useState(null),[d,a]=t.useState(""),[o,h]=t.useState(!1),p=async r=>{r.preventDefault(),a(""),l(null),h(!0);try{const n=await fetch(`/api/medical/search?idNumber=${encodeURIComponent(i)}&servicecode=${encodeURIComponent(c)}`),x=await n.json();n.ok?l(x):a(x.error||"حدث خطأ غير معروف")}catch{a("فشل الاتصال بالخادم")}finally{h(!1)}};return e.jsx("div",{className:"App",children:e.jsx("main",{children:e.jsxs("div",{className:"",children:[e.jsx(u,{}),e.jsxs("div",{className:"inner-page inquiries-container",style:{paddingTop:"4rem"},children:[e.jsx("h1",{className:"heading",children:"الإجازات المرضية"}),e.jsx("p",{className:"sub-heading",children:"خدمة الاستعلام عن الإجازات المرضية تتيح لك الاستعلام عن حالة طلبك للإجازة ويمكنك طباعتها عن طريق تطبيق صحتي"}),d&&e.jsx("div",{className:"alert alert-danger",children:d}),e.jsx("form",{onSubmit:p,children:e.jsxs("div",{className:"row justify-content-center mt-1",children:[e.jsxs("div",{className:"col-md-5 p-4",children:[e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",maxLength:"20",placeholder:"رمز الخدمة",className:"form-control",value:c,onChange:r=>m(r.target.value),required:!0})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{}),e.jsx("input",{type:"text",maxLength:"10",pattern:"\\d*",placeholder:"رقم الهوية / الإقامة",className:"form-control",value:i,onChange:r=>j(r.target.value),required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary mt-3",disabled:o,children:o?"جاري استعلام...":"استعلام"})]}),e.jsx("div",{className:"col-md-12 text-center",children:e.jsx("a",{className:"btn btn-primary mb-3",href:"#/inquiries",children:"رجوع للاستعلامات"})})]})}),s&&e.jsx("div",{style:{padding:"1rem"},children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-header",children:[e.jsx("p",{children:e.jsx("strong",{children:"الاسم:"})}),e.jsx("p",{children:s.name}),e.jsx("p",{children:e.jsx("strong",{children:"تاريخ إصدار تقرير الإجازة:"})}),e.jsxs("p",{children:[" ",new Date(s.issueDate).toLocaleDateString("ar-EG")]}),e.jsx("p",{children:e.jsx("strong",{children:"تبدأ من:"})}),e.jsxs("p",{children:[" ",new Date(s.startDate).toLocaleDateString("ar-EG")]}),e.jsx("p",{children:e.jsx("strong",{children:"وحتى:"})}),e.jsxs("p",{children:[" ",new Date(s.endDate).toLocaleDateString("ar-EG")]}),e.jsx("p",{children:e.jsx("strong",{children:"المدة بالأيام:"})}),e.jsxs("p",{children:[" ",s.duration]}),e.jsx("p",{children:e.jsx("strong",{children:"اسم الطبيب:"})}),e.jsxs("p",{children:[" ",s.doctor]}),e.jsx("p",{children:e.jsx("strong",{children:"المسمى الوظيفي:"})}),e.jsxs("p",{children:[" ",s.jobTitle]})]})})})]}),e.jsx(g,{})]})})})};export{f as default};
