import{r as n,j as e}from"./index-sxtyJwu6.js";import{H as u,F as g}from"./Footer-ClirW-H2.js";const f=()=>{const[i,j]=n.useState(""),[c,m]=n.useState(""),[s,l]=n.useState(null),[d,t]=n.useState(""),[o,h]=n.useState(!1),p=async r=>{r.preventDefault(),t(""),l(null),h(!0);try{const a=await fetch(`/api/medical/search?idNumber=${encodeURIComponent(i)}&servicecode=${encodeURIComponent(c)}`),x=await a.json();a.ok?l(x):t(x.error||"حدث خطأ غير معروف")}catch{t("فشل الاتصال بالخادم")}finally{h(!1)}};return e.jsx("div",{className:"App",children:e.jsx("main",{children:e.jsxs("div",{className:"",children:[e.jsx(u,{}),e.jsxs("div",{className:"inner-page inquiries-container",children:[e.jsx("h1",{className:"heading",children:"الإجازات المرضية"}),e.jsx("p",{className:"sub-heading",children:"خدمة الاستعلام عن الإجازات المرضية تتيح لك الاستعلام عن حالة طلبك للإجازة ويمكنك طباعتها عن طريق تطبيق صحتي"}),d&&e.jsx("div",{className:"alert alert-danger",children:d}),e.jsx("form",{onSubmit:p,children:e.jsxs("div",{className:"row justify-content-center mt-1",children:[e.jsxs("div",{className:"col-md-5 p-4",children:[e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",maxLength:"20",placeholder:"رمز الخدمة",className:"form-control",value:c,onChange:r=>m(r.target.value),required:!0})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{}),e.jsx("input",{type:"text",maxLength:"10",pattern:"\\d*",placeholder:"رقم الهوية / الإقامة",className:"form-control",value:i,onChange:r=>j(r.target.value),required:!0})]}),s&&e.jsx("div",{className:"card",style:{margin:"1rem 0"},children:e.jsxs("div",{className:"card-header info-grid",children:[e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"الاسم:"})}),e.jsx("p",{children:s.name})]}),e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"تاريخ إصدار تقرير الإجازة:"})}),e.jsx("p",{children:new Date(s.issueDate).toLocaleDateString("en-US")})]}),e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"تبدأ من:"})}),e.jsx("p",{children:new Date(s.startDate).toLocaleDateString("en-US")})]}),e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"وحتى:"})}),e.jsx("p",{children:new Date(s.endDate).toLocaleDateString("en-US")})]}),e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"المدة بالأيام:"})}),e.jsx("p",{children:s.duration})]}),e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"اسم الطبيب:"})}),e.jsx("p",{children:s.doctor})]}),e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"المسمى الوظيفي:"})}),e.jsx("p",{children:s.jobTitle})]})]})}),e.jsx("button",{type:"submit",className:"btn btn-primary mt-3",disabled:o,children:o?"جاري استعلام...":"استعلام"})]}),e.jsx("div",{className:"col-md-12 text-center",children:e.jsx("a",{className:"btn btn-primary mb-3",href:"#/inquiries",children:"رجوع للاستعلامات"})})]})})]}),e.jsx(g,{})]})})})};export{f as default};
